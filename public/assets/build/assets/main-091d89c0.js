import{i as Z,B as le,a as de,b as ce,c as ue,u as L,g as $,r as f,f as t,j as l,N as me,F as R,as as he,at as J,a0 as Q,G as X,n as z,m as j,s as ee,h as Y,v as pe,d as fe,e as ge,w as be,P as _e,R as ve}from"./index-da73a707.js";import{P as M,S as xe,r as Ne,s as we,t as Se,u as Ce}from"./index-a2f3e652.js";const V={locale:"en",theme:"light",menu:"horizontal",layout:"full",rtlClass:"ltr",animation:"",navbar:"navbar-sticky",semidark:!1,authUser:null,lastLogin:null,settingData:{logo:"",favicon:""},apiUrl:window.location.origin,publicData:{logo:"",favicon:""},authToken:"",agreementToken:""};Z.use(le).use(de).use(ce).init({fallbackLng:V.locale,debug:!1,load:"languageOnly"});const y={rtlClass:"ltr",animation:"",navbar:"navbar-sticky",locale:"en",sidebar:!1,pageTitle:"",semidark:!1,settingData:null,pin:"",authUser:null,lastLogin:null,authToken:"",agreementToken:"",riskprofileToken:"",kycToken:"",publicData:null},Ee={rtlClass:localStorage.getItem("rtlClass")||V.rtlClass,animation:localStorage.getItem("animation")||V.animation,navbar:localStorage.getItem("navbar")||V.navbar,locale:localStorage.getItem("i18nextLng")||V.locale,sidebar:localStorage.getItem("sidebar")||y.sidebar,semidark:localStorage.getItem("semidark")||V.semidark,settingData:JSON.parse(localStorage.getItem("settingData"))||V.settingData||V.settingData,publicData:JSON.parse(localStorage.getItem("publicData"))||V.publicData||V.publicData,authToken:localStorage.getItem("authToken")||y.authToken,agreementToken:localStorage.getItem("agreementToken")||y.agreementToken,riskprofileToken:localStorage.getItem("riskprofileToken")||y.riskprofileToken,kycToken:localStorage.getItem("kycToken")||y.kycToken,pin:localStorage.getItem("pin")||y.pin,authUser:JSON.parse(localStorage.getItem("authUser"))||V.authUser||V.authUser,lastLogin:JSON.parse(localStorage.getItem("lastLogin"))||V.lastLogin||V.lastLogin,apiUrl:V.apiUrl},te=ue({name:"auth",initialState:Ee,reducers:{toggleRTL(e,{payload:n}){var h;n=n||e.rtlClass,localStorage.setItem("rtlClass",n),e.rtlClass=n,(h=document.querySelector("html"))==null||h.setAttribute("dir",e.rtlClass||"ltr")},toggleAnimation(e,{payload:n}){n=n||e.animation,n=n==null?void 0:n.trim(),localStorage.setItem("animation",n),e.animation=n},toggleNavbar(e,{payload:n}){n=n||e.navbar,localStorage.setItem("navbar",n),e.navbar=n},toggleSemidark(e,{payload:n}){n=n===!0||n==="true",localStorage.setItem("semidark",n),e.semidark=n},toggleLocale(e,{payload:n}){n=n||e.locale,Z.changeLanguage(n),e.locale=n},toggleSidebar(e){e.sidebar=!e.sidebar},setPageTitle(e,{payload:n}){document.title=`${n} | Sourcefile Solutions - CRM`},setSettingToggleData(e,{payload:n}){localStorage.setItem("settingData",JSON.stringify(n)),e.settingData=n,document.querySelectorAll(".favicon-icon").forEach(c=>{c.href=V.apiUrl+"/storage/"+n.favicon})},setPublicData(e,{payload:n}){localStorage.setItem("publicData",JSON.stringify(n)),e.publicData=n,document.querySelectorAll(".favicon-icon").forEach(c=>{c.href=n.favicon})},setAuthToken(e,{payload:n}){localStorage.setItem("authToken",n),e.authToken=n},setAgreementToken(e,{payload:n}){localStorage.setItem("agreementToken",n),e.agreementToken=n},setRiskProfileToken(e,{payload:n}){localStorage.setItem("riskprofileToken",n),e.riskprofileToken=n},setKycToken(e,{payload:n}){localStorage.setItem("kycToken",n),e.kycToken=n},setPin(e,{payload:n}){localStorage.setItem("pin",n),e.pin=n},setAuthUser(e,{payload:n}){localStorage.setItem("authUser",JSON.stringify(n)),e.authUser=n},setLastLogin(e,{payload:n}){localStorage.setItem("lastLogin",n),e.lastLogin=n}}}),{setAgreementToken:ne,setRiskProfileToken:K,setKycToken:Ae,setPublicData:O,setAuthToken:k,setPin:Ct,setLastLogin:Et,setAuthUser:Pe,setSettingToggleData:Te,toggleRTL:At,toggleAnimation:De,toggleNavbar:Le,toggleSemidark:Ie,toggleLocale:je,toggleSidebar:Fe,setPageTitle:Pt}=te.actions,Be=te.reducer;function ae({children:e}){const n=L(c=>c.themeConfig),h=$();return f.useEffect(()=>{h(De(localStorage.getItem("animation")||n.animation)),h(Le(localStorage.getItem("navbar")||n.navbar)),h(je(localStorage.getItem("i18nextLng")||n.locale)),h(Ie(localStorage.getItem("semidark")||n.semidark))},[h,n.animation,n.navbar,n.locale,n.semidark]),t("div",{children:t("div",{className:"horizontal main-section antialiased relative font-nunito text-sm font-normal",children:e})})}const qe=({children:e})=>t(ae,{children:l("div",{className:"text-black dark:text-white-dark min-h-screen",children:[e," "]})}),Ve=()=>l("div",{className:"dark:text-white-dark text-center ltr:sm:text-left rtl:sm:text-right p-6 pt-0 mt-auto",children:["Â© ",new Date().getFullYear(),". Sourcefile Solutions - CRM. All rights reserved."]}),Re=()=>{const e=L(n=>{var h;return(h=n==null?void 0:n.themeConfig)==null?void 0:h.publicData});return t("header",{className:"z-40 ",children:t("div",{className:"shadow-sm",children:l("div",{className:"relative bg-white flex w-full items-center px-5 py-2.5 dark:bg-black justify-between h-20",children:[t("div",{className:"horizontal-logo flex lg:hidden justify-between items-center ltr:mr-2 rtl:ml-2",children:t(me,{to:"#",className:"main-logo flex items-center shrink-0",children:t("img",{className:"w-[210px] ltr:-ml-1 rtl:-mr-1 inline",src:e!=null&&e.logo?e.logo:"Document"})})}),t("div",{className:" ltr:ml-auto  dark:text-[#d0d2d6]"})]})})})},$e=()=>l(R,{children:[t("div",{id:"popper-portal"}),t("div",{id:"modal-portal"})]}),Oe=({children:e})=>{const n=L(m=>m.themeConfig),h=$(),[c,_]=f.useState(!0),[r,u]=f.useState(!1),a=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},d=()=>{document.body.scrollTop>50||document.documentElement.scrollTop>50?u(!0):u(!1)};return f.useEffect(()=>{window.addEventListener("scroll",d);const m=document.getElementsByClassName("screen_loader");return m!=null&&m.length&&(m[0].classList.add("animate__fadeOut"),setTimeout(()=>{_(!1)},200)),()=>{window.removeEventListener("onscroll",d)}},[]),t(ae,{children:l("div",{className:"relative",children:[t("div",{className:`${!n.sidebar&&"hidden"||""} fixed inset-0 bg-[black]/60 z-50 lg:hidden`,onClick:()=>h(Fe())}),t("div",{className:"fixed bottom-6 ltr:right-6 rtl:left-6 z-50",children:r&&t("button",{type:"button",className:"btn btn-outline-primary rounded-full p-2 animate-pulse bg-[#fafafa] dark:bg-[#060818] dark:hover:bg-primary",onClick:a,children:t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7l4-4m0 0l4 4m-4-4v18"})})})}),t("div",{className:`${n.navbar} main-container text-black dark:text-white-dark min-h-screen`,children:l("div",{className:"main-content flex flex-col min-h-screen",children:[t(Re,{}),t(f.Suspense,{children:t("div",{className:`${n.animation} p-6 animate__animated`,children:e})}),t(Ve,{}),t($e,{})]})})]})})};function ze(){const[e]=he(),n=e.get("action");return console.log(n),t(R,{children:n?t("div",{className:"flex justify-center items-center  ",children:l("div",{className:"bg-white p-8 rounded-lg  max-w-md w-full text-center transform transition-transform duration-300 hover:scale-105 border-2 border-[#c0f0d8]",children:[t("div",{className:"mb-6",children:t(J,{className:"mx-auto text-green-500 animate-pulse",size:100})}),l("h1",{className:"text-2xl font-bold text-[#009688] mb-4",children:[n=="rp"?" Risk Profile":n=="kyc"?"KYC":n=="agmt"?"Agreement":""," Verified Successfully"]}),l("p",{className:"font-bold text-[#506690]",children:["You have successfully verified You   ",n=="rp"?" Risk Profile":n=="kyc"?"KYC":n=="agmt"?"Agreement":"","."]})]})}):l("div",{className:"bg-white shadow-lg rounded-lg mt-9 max-w-[500px] m-auto",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none mb-5",children:t("div",{className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3",children:t(Q,{className:"w-full h-full text-red-500 "})})}),t("div",{className:"text-2xl font-bold text-[#e95f2b]",children:"Invalid"})]}),t("div",{className:" text-center px-5 pb-6",children:t("b",{children:"Please ensure you have provided a valid URL"})})]})})}function G({error:e}){return console.log(e),l("div",{className:"bg-white shadow-lg rounded-lg mt-9 max-w-[500px] m-auto",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none mb-5",children:t("div",{className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3",children:t(Q,{className:"w-full h-full text-red-500 "})})}),t("div",{className:"text-2xl font-bold text-[#e95f2b]",children:e==null?void 0:e.title})]}),t("div",{className:" text-center px-5 pb-6",children:t("b",{children:e==null?void 0:e.message})})]})}function H(e){return X({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#546E7A",d:"M12,40V10h20c2.2,0,4,1.8,4,4v26c0,2.2-1.8,4-4,4H16C13.8,44,12,42.2,12,40z"},child:[]},{tag:"path",attr:{fill:"#4FC3F7",d:"M32,13H16c-0.6,0-1,0.4-1,1v8c0,0.6,0.4,1,1,1h16c0.6,0,1-0.4,1-1v-8C33,13.4,32.6,13,32,13z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M19,30h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C20,29.6,19.6,30,19,30z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M25,30h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C26,29.6,25.6,30,25,30z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M31,30h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C32,29.6,31.6,30,31,30z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M19,35h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C20,34.6,19.6,35,19,35z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M25,35h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C26,34.6,25.6,35,25,35z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M31,35h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C32,34.6,31.6,35,31,35z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M19,40h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C20,39.6,19.6,40,19,40z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M25,40h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C26,39.6,25.6,40,25,40z"},child:[]},{tag:"path",attr:{fill:"#B3E5FC",d:"M31,40h-2c-0.6,0-1-0.4-1-1v-1c0-0.6,0.4-1,1-1h2c0.6,0,1,0.4,1,1v1C32,39.6,31.6,40,31,40z"},child:[]},{tag:"path",attr:{fill:"#37474F",d:"M16,10h-4V4c0-1.1,0.9-2,2-2h0c1.1,0,2,0.9,2,2V10z"},child:[]}]})(e)}function W(){return t("div",{className:"flex justify-center items-center  ",children:l("div",{className:"bg-white p-8 rounded-lg  max-w-md w-full text-center transform transition-transform duration-300 hover:scale-105 border-2 border-[#c0f0d8]",children:[t("div",{className:"mb-6",children:t(J,{className:"mx-auto text-green-500 animate-pulse",size:100})}),t("h1",{className:"text-2xl font-bold text-[#009688] mb-4",children:"Risk Profile Verified Successfully"}),t("p",{className:"font-bold text-[#506690]",children:"You have successfully verified You Risk Profile."})]})})}function Ue({phone:e,token:n,url:h}){return l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:t(Ye,{phone:e,token:n,url:h})})})})]})}const Ye=({phone:e,token:n,url:h})=>{const c=L(i=>i.themeConfig.publicData),[_]=f.useState({password:"",otp:"",phone:e,token:n,isChecked:!1,isVerified:!1}),[r,u]=f.useState(_),[a,d]=f.useState({}),m=i=>{const{value:x,name:b}=i.target;d({...a,[b]:""}),u({...r,[b]:x})},v=()=>{d({});let i={};return r.phone||(i={...i,phone:"phone number id  is required"}),d(i),{totalErrors:Object.keys(i).length}},[g,S]=f.useState(!1),C=async i=>{var b;console.log("Checking Login User API...."),S(!0);try{const s=await j({method:"post",url:h+"api/customer-riskprofile-otp-generate",data:i,headers:{"Content-Type":"multipart/form-data"}});s.data.status=="success"?s.data.action=="verified"?u({...r,isVerified:!0}):u({...r,isChecked:!0}):alert("Failed")}catch(s){if(console.log(s),((b=s==null?void 0:s.response)==null?void 0:b.status)===422){const w=s.response.data.errors;let E={};for(var x in w)E={...E,[x]:w[x][0]};d(E)}}finally{S(!1)}},N=()=>{if(v().totalErrors)return!1;const x=new FormData;x.append("phone",r.phone),x.append("token",r.token),C(x)};return t(R,{children:r.isChecked?t(ye,{params:r,setParams:u,defaultParams:_,url:h}):r.isVerified?t(W,{}):l("div",{className:"bg-white shadow-lg rounded-lg mt-9",children:[l("header",{className:"px-5 pb-5",children:[c!=null&&c.favicon?t("div",{className:"flex-none text-center",children:t("img",{className:"w-16 h-16 ltr:-ml-1 rtl:-mr-1 inline mt-5",src:`${c.favicon}`})}):null,l("div",{className:"mt-2",children:[t("h2",{className:"text-2xl font-bold",children:"Verify"}),t("span",{className:"font-bold text-[#0b6917]",children:"Verify Your Phone Number to submit Risk Profile"})]})]}),t("div",{className:"bg-gray-100 text-center px-5 py-10",children:l("form",{autoComplete:"off",onSubmit:i=>{i.preventDefault(),N()},className:"justify-center rounded",children:[l("div",{children:[t("label",{htmlFor:"phone",className:"text-left",children:"Phone"}),l("div",{className:"relative text-white-dark mb-2",children:[t("input",{name:"phone",type:"tel",disabled:!0,placeholder:"Enter Email or User ID",className:"form-input ps-10 cursor-not-allowed bg-[#DBE7FF] placeholder:text-white-dark font-extrabold text-[16px]",value:r.phone,onChange:i=>m(i)}),t("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:t(H,{size:20})})]}),t("span",{className:"text-danger font-bold ",children:a!=null&&a.otp?a.otp:""})]}),t("div",{className:"max-w-[260px] mx-auto mt-4",children:t("button",{type:"submit",className:"btn btn-gradient !mt-6 w-full border-0 w-100px uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",disabled:g,children:g?"Please Wait":"Get OTP"})})]})}),t("footer",{children:l("div",{className:"bg-[#e3e7fc] mt-10 p-3 font-semibold text-[13px]",children:["Note:-",l("p",{children:["To verify, you need to enter your ",t("b",{children:"Aadhaar number"}),"  and ",t("b",{children:"PAN number"})]}),l("p",{children:["You will receive an ",t("b",{children:"OTP"})," to your Aadhaar-linked phone"]})]})})]})})},ye=({params:e,setParams:n,defaultParams:h,url:c})=>{const _=$(),r=z(),[u,a]=f.useState({}),d=b=>{const{value:s,name:w}=b.target,[E,D]=w.split("_");if(E=="otp"){if(a({...u,otp:""}),s){let B=document.querySelector(`input[name=otp_${parseInt(D,10)+1}]`);B&&B.focus()}const T=document.querySelectorAll(".otp");let F="";T.forEach(B=>{F+=B.value}),n({...e,otp:F})}else a({...u,[w]:""}),n({...e,[w]:s})},m=()=>{a({});let b={};return e.otp||(b={...b,otp:"otp is required",password:""}),a(b),{totalErrors:Object.keys(b).length}},[v,g]=f.useState(!1),[S,C]=f.useState(null),N=async b=>{var w;g(!0),C(null);try{const E=await j({method:"post",url:c+"api/customer-riskprofile-otp-verify",data:b,headers:{"Content-Type":"multipart/form-data"}});E.data.status=="success"?E.data.action=="pan"?(_(k(E.data.authToken)),_(K(e.token)),r("/riskprofile-pan-verification",{state:{url:c,riskProfile:E.data.riskProfile}})):E.data.action=="verified"?C("verified"):E.data.action=="e-sign"&&(_(k(E.data.authToken)),_(K(e.token)),r("/riskprofile-e-sign",{state:{url:E.data.url}})):alert("Failed")}catch(E){if(console.log(E),((w=E==null?void 0:E.response)==null?void 0:w.status)===422){const D=E.response.data.errors;let T={};for(var s in D)T={...T,[s]:D[s][0]};a(T)}}finally{g(!1)}},i=()=>{if(m().totalErrors)return!1;const s=new FormData;s.append("otp",e.otp),s.append("phone",e.phone),s.append("token",e.token),N(s)},x=f.useRef(null);return f.useEffect(()=>{x.current&&x.current.focus()},[]),S=="verified"?t(W,{}):l("div",{className:"bg-white shadow-lg rounded-lg mt-9",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none",children:t("img",{src:`https://ui-avatars.com/api/?background=random&name=${e.user_name}&length=3`,className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3 rounded-full h-12 w-12 object-cover",alt:""})}),t("div",{className:"text-[18px] font-medium text-gray-500",children:e.user_name})]}),t("div",{className:"bg-gray-100 text-center px-5 py-6",children:l("form",{autoComplete:"off",onSubmit:b=>{b.preventDefault(),i()},className:"justify-center rounded",children:[l("div",{children:[t("label",{className:"text-2xl font-bold mb-8",children:"Enter 4 Digit otp"}),l("div",{className:"flex items-center justify-center gap-3 mb-2",children:[t("input",{type:"tel",ref:x,value:e.otp.charAt(0),name:"otp_0",onChange:b=>d(b),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1}),t("input",{type:"tel",value:e.otp.charAt(1),name:"otp_1",onChange:b=>d(b),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1}),t("input",{type:"tel",value:e.otp.charAt(2),name:"otp_2",onChange:b=>d(b),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1}),t("input",{type:"tel",value:e.otp.charAt(3),name:"otp_3",onChange:b=>d(b),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1})]}),u.otp?t("b",{className:"text-danger font-bold p-2",children:u.otp}):""]}),t("div",{className:"max-w-[260px] mx-auto mt-4",children:t("button",{type:"submit",onClick:()=>i(),disabled:v,className:"btn btn-gradient !mt-6 w-full border-0 w-100px uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:v?"Please Wait":"Verify OTP"})})]})})]})};function ke(){const{company:e,token:n}=ee(),h=L(s=>s.themeConfig.authToken),c=L(s=>s.themeConfig.riskprofileToken),_=$(),r=z();function u(){const s=window.location.hostname,w=s.split(".");return s.includes("localhost")?"localhost:8000":w.length>2?w.slice(-2).join("."):s}const d=`https://${e+"."+u()}/`;f.useEffect(()=>{h&&c==n?r("/riskprofile-pan-verification",{state:{url:d}}):b()},[e,n]);const[m,v]=f.useState(!1),[g,S]=f.useState(null),[C,N]=f.useState([]),[i,x]=f.useState(null),b=async()=>{v(!0),x(null);try{const s=await j({method:"get",url:d+`api/customer-riskprofile-check/${n}`,params:{token:n},headers:{"Content-Type":"application/json"}});s.data.status=="success"?(_(O(s.data.setting)),N(s.data.data),S(s.data.action)):s.data.status=="error"?(_(O(s.data.setting)),x(s.data.data)):s.data.status=="info"&&_(O(s.data.setting))}catch(s){alert(s)}finally{v(!1)}};return t("div",{className:"",children:m?t(M,{}):i?t(G,{error:i}):g==="login"?t(Ue,{phone:C==null?void 0:C.phone,token:n,url:d}):g==="verified"?t(W,{}):null})}function We({phone:e,token:n,url:h}){return l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:t(Me,{phone:e,token:n,url:h})})})})]})}const Me=({phone:e,token:n,url:h})=>{const c=L(i=>i.themeConfig.publicData),[_]=f.useState({password:"",otp:"",phone:e,token:n,isChecked:!1}),[r,u]=f.useState(_),[a,d]=f.useState({}),m=i=>{const{value:x,name:b}=i.target;d({...a,[b]:""}),u({...r,[b]:x})},v=()=>{d({});let i={};return r.phone||(i={...i,phone:"email or employee id  is required"}),d(i),{totalErrors:Object.keys(i).length}},[g,S]=f.useState(!1),C=async i=>{var b;console.log("Checking Login User API...."),S(!0);try{(await j({method:"post",url:h+"api/customer-agreement-otp-generate",data:i,headers:{"Content-Type":"multipart/form-data"}})).data.status=="success"?u({...r,isChecked:!0}):alert("Failed")}catch(s){if(console.log(s),((b=s==null?void 0:s.response)==null?void 0:b.status)===422){const w=s.response.data.errors;let E={};for(var x in w)E={...E,[x]:w[x][0]};d(E)}}finally{S(!1)}},N=()=>{if(v().totalErrors)return!1;const x=new FormData;x.append("phone",r.phone),x.append("token",r.token),C(x)};return t(R,{children:r.isChecked?t(Ke,{params:r,setParams:u,defaultParams:_,url:h}):l("div",{className:"bg-white shadow-lg rounded-lg mt-9",children:[l("header",{className:"px-5 pb-5",children:[c!=null&&c.favicon?t("div",{className:"flex-none text-center",children:t("img",{className:"w-16 h-16 ltr:-ml-1 rtl:-mr-1 inline mt-5",src:`${c.favicon}`})}):null,l("div",{className:"mt-2",children:[t("h2",{className:"text-2xl font-bold",children:"Verify"}),t("span",{className:"font-bold text-[#0b6917]",children:"Verify Your Phone Number to accept Agreement"})]})]}),t("div",{className:"bg-gray-100 text-center px-5 py-10",children:l("form",{autoComplete:"off",onSubmit:i=>{i.preventDefault(),N()},className:"justify-center rounded",children:[l("div",{children:[t("label",{htmlFor:"phone",className:"text-left",children:"Phone"}),l("div",{className:"relative text-white-dark mb-2",children:[t("input",{name:"phone",type:"tel",disabled:!0,placeholder:"Enter Email or User ID",className:"form-input ps-10 cursor-not-allowed bg-[#DBE7FF] placeholder:text-white-dark font-extrabold text-[16px]",value:r.phone,onChange:i=>m(i)}),t("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:t(H,{size:20})})]}),t("span",{className:"text-danger font-bold ",children:a!=null&&a.phone?a.phone:""})]}),t("div",{className:"max-w-[260px] mx-auto mt-4",children:t("button",{type:"submit",className:"btn btn-gradient !mt-6 w-full border-0 w-100px uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",disabled:g,children:g?"Please Wait":"Get OTP"})})]})}),t("footer",{children:l("div",{className:"bg-[#e3e7fc] mt-10 p-3 font-semibold text-[13px]",children:["Note:-",l("p",{children:["To verify, you need to enter your ",t("b",{children:"Aadhaar number"}),"  and ",t("b",{children:"PAN number"})]}),l("p",{children:["You will receive an ",t("b",{children:"OTP"})," to your Aadhaar-linked phone"]})]})})]})})},Ke=({params:e,setParams:n,defaultParams:h,url:c})=>{const _=$(),r=z(),[u,a]=f.useState({}),d=i=>{const{value:x,name:b}=i.target,[s,w]=b.split("_");if(s=="otp"){if(a({...u,otp:""}),x){let T=document.querySelector(`input[name=otp_${parseInt(w,10)+1}]`);T&&T.focus()}const E=document.querySelectorAll(".otp");let D="";E.forEach(T=>{D+=T.value}),n({...e,otp:D})}else a({...u,[b]:""}),n({...e,[b]:x})},m=()=>{a({});let i={};return e.otp||(i={...i,otp:"otp is required",password:""}),a(i),{totalErrors:Object.keys(i).length}},[v,g]=f.useState(!1),S=async i=>{var b;g(!0);try{const s=await j({method:"post",url:c+"api/customer-agreement-otp-verify",data:i,headers:{"Content-Type":"multipart/form-data"}});s.data.status=="success"?(_(k(s.data.authToken)),_(ne(e.token)),console.log(c),r("/agreement-pan-verification",{state:{url:c}})):alert("Failed")}catch(s){if(console.log(s),((b=s==null?void 0:s.response)==null?void 0:b.status)===422){const w=s.response.data.errors;let E={};for(var x in w)E={...E,[x]:w[x][0]};a(E)}}finally{g(!1)}},C=()=>{if(m().totalErrors)return!1;const x=new FormData;x.append("otp",e.otp),x.append("phone",e.phone),x.append("token",e.token),S(x)},N=f.useRef(null);return f.useEffect(()=>{N.current&&N.current.focus()},[]),l("div",{className:"bg-white shadow-lg rounded-lg mt-9",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none",children:t("img",{src:`https://ui-avatars.com/api/?background=random&name=${e.user_name}&length=3`,className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3 rounded-full h-12 w-12 object-cover",alt:""})}),t("div",{className:"text-[18px] font-medium text-gray-500",children:e.user_name})]}),t("div",{className:"bg-gray-100 text-center px-5 py-6",children:l("form",{autoComplete:"off",onSubmit:i=>{i.preventDefault(),C()},className:"justify-center rounded",children:[l("div",{children:[t("label",{className:"text-2xl font-bold mb-8",children:"Enter 4 Digit otp"}),l("div",{className:"flex items-center justify-center gap-3 mb-2",children:[t("input",{type:"tel",ref:N,value:e.otp.charAt(0),name:"otp_0",onChange:i=>d(i),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1}),t("input",{type:"tel",value:e.otp.charAt(1),name:"otp_1",onChange:i=>d(i),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1}),t("input",{type:"tel",value:e.otp.charAt(2),name:"otp_2",onChange:i=>d(i),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1}),t("input",{type:"tel",value:e.otp.charAt(3),name:"otp_3",onChange:i=>d(i),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp",maxLength:1})]}),u.otp?t("b",{className:"text-danger font-bold p-2",children:u.otp}):""]}),t("div",{className:"max-w-[260px] mx-auto mt-4",children:t("button",{type:"submit",onClick:()=>C(),disabled:v,className:"btn btn-gradient !mt-6 w-full border-0 w-100px uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:v?"Please Wait":"Verify OTP"})})]})})]})};function Je(){const e=L(s=>s.themeConfig.authToken),n=L(s=>s.themeConfig.agreementToken),{company:h,token:c}=ee(),_=z(),u=`https://${h+"."+d()}/`;f.useEffect(()=>{e&&n==c?_("/agreement-pan-verification",{state:{url:u}}):b()},[h,c]);const a=$();function d(){const s=window.location.hostname,w=s.split(".");return s.includes("localhost")?"localhost:8000":w.length>2?w.slice(-2).join("."):s}const[m,v]=f.useState(null),[g,S]=f.useState(!0),[C,N]=f.useState([]),[i,x]=f.useState(null),b=async()=>{a(O({logo:"",favicon:""})),S(!0),x(null);try{const s=await j({method:"get",url:u+`api/customer-check-agreement/${c}`,headers:{"Content-Type":"application/json"}});s.data.status=="success"?(N(s.data.data),v(s.data.action),a(O(s.data.setting))):s.data.status=="error"?(a(O(s.data.setting)),x(s.data.error)):s.data.status=="info"&&a(O(s.data.setting))}catch(s){alert(s)}finally{S(!1)}};return t("div",{children:g?t(M,{}):i?t(G,{error:i}):m==="login"?t(We,{phone:C==null?void 0:C.phone,token:c,url:u}):null})}function se(){return t("div",{className:"flex h-full",children:t("div",{className:"m-auto",children:t("span",{className:"animate-spin border-[3px] mt-10 border-success border-l-transparent rounded-full w-6 h-6 inline-block align-middle m-auto mb-10"})})})}function Ge(){var B;const e=L(A=>A.themeConfig.authToken),n=L(A=>A.themeConfig.agreementToken),h=$(),_=(B=Y().state)==null?void 0:B.url;f.useEffect(()=>{!n||!e?(h(k("")),h(ne(""))):m()},[e,n]);const[r,u]=f.useState(!0),[a,d]=f.useState([]),m=async()=>{u(!0);try{const A=await j({method:"get",url:_+"api/customer-get-agreement",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e,agreementToken:n}});if(A.data.status=="success"){const p=A.data.agreement;d(p),S({pan:p!=null&&p.pan?p.pan:"",full_name:p!=null&&p.full_name?p.full_name:"",dob:p!=null&&p.dob?p.dob:"",email:p!=null&&p.email?p.email:"",is_verified:!!(p!=null&&p.is_submited)})}}catch{}finally{u(!1)}},[v]=f.useState({pan:"",full_name:"",dob:"",email:"",is_verified:!1}),[g,S]=f.useState(v),[C,N]=f.useState({}),i=A=>{const{value:p,name:o}=A.target;N({...C,[o]:""}),S({...g,[o]:p})},x=()=>{N({});let A={};return g.pan||(A={...A,pan:"pan number is required"}),g.full_name||(A={...A,full_name:"full_name is required"}),g.dob||(A={...A,dob:"date of birth is required"}),g.email||(A={...A,email:"email address is required"}),N(A),{totalErrors:Object.keys(A).length}},[b,s]=f.useState(!1),w=async A=>{var o;s(!0);try{const I=await j({method:"post",url:_+"api/customer-submit-agreement",data:A,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e,agreementToken:n}});I.data.status=="success"?d(I.data.agreement):alert("Failed")}catch(I){if(console.log(I),I.response.status==401,((o=I==null?void 0:I.response)==null?void 0:o.status)===422){const P=I.response.data.errors;let q={};for(var p in P)q={...q,[p]:P[p][0]},console.log(P[p][0]);N(q)}}finally{s(!1)}},E=()=>{if(x().totalErrors)return!1;const p=new FormData;p.append("pan",g.pan),p.append("full_name",g.full_name),p.append("dob",g.dob),p.append("email",g.email),w(p)},[D,T]=f.useState(null),F=async()=>{T(null),s(!0);try{const A=await j({method:"get",url:_+"api/customer-view-agreement",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e,agreementToken:n}});A.data.status=="success"&&(console.log("heree"),T(A.data.pdf))}catch(A){console.log(A),T(null)}finally{s(!1)}};return t(R,{children:D?t("div",{style:{width:"100%",height:"100vh",border:"none"},children:t("iframe",{src:D,title:"Agreement",width:"100%",height:"100%",style:{border:"none"}})}):l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:l("div",{className:"bg-white shadow-lg rounded-lg mt-9 ",children:[t("header",{className:"bg-[#f1faff] p-3 rounded-lg text-center",children:t("div",{className:"mt-2",children:l("h2",{className:"text-[20px] font-bold",children:[" ",a!=null&&a.is_submited?"Agreement":"PAN Verification"," "]})})}),r?l("div",{className:"mt-20",children:[" ",t(se,{})," "]}):a!=null&&a.is_submited?t(R,{children:l("div",{children:[l("div",{className:"mt-4 m-3 bg-[#dbe7ff38] p-3",children:[l("b",{children:[" Hi ",a==null?void 0:a.full_name]}),",",t("blockquote",{className:"mt-2 font-semibold text-[#08735e]",children:"Your PAN card has been verified successfully! You can now view and verify (e-sign) your agreement"})]}),t("div",{children:t("button",{type:"button",onClick:()=>F(),className:"btn btn-primary !mt-10 saturate-50 shadow m-auto",disabled:b,children:b?"Please Wait...":"View Agreement"})}),l("div",{className:"bg-[#e3e7fc] mt-10 p-3 font-semibold text-[13px]",children:["Note:-",t("p",{children:"To verify, you need to enter your 12-digit Aadhaar number"}),t("p",{children:"You will receive an OTP to your Aadhaar-linked phone"})]})]})}):l("form",{className:"space-y-5 p-4 ",children:[l("div",{children:[t("label",{htmlFor:"groupFname",children:"PAN Number"}),t("input",{type:"text",placeholder:"Enter Pan Number",className:"form-input",name:"pan",value:g.pan,onChange:A=>i(A),maxLength:10,disabled:!!(a!=null&&a.is_submited)}),t("div",{className:"text-danger mt-1",children:C.pan})]}),l("div",{children:[t("label",{htmlFor:"groupLname",children:"Full Name"}),t("input",{type:"text",placeholder:"Enter Full Name",className:"form-input",name:"full_name",value:g.full_name,onChange:A=>i(A),disabled:!!(a!=null&&a.is_submited)}),t("div",{className:"text-danger mt-1",children:C.full_name})]}),l("div",{children:[t("label",{htmlFor:"groupLname",children:"Email"}),t("input",{type:"email",placeholder:"Enter Email Address",className:"form-input",name:"email",value:g.email,onChange:A=>i(A),disabled:!!(a!=null&&a.is_submited)}),t("div",{className:"text-danger mt-1",children:C.email})]}),l("div",{children:[t("label",{htmlFor:"groupLname",children:"Date Of Birth"}),t("input",{type:"date",placeholder:"Enter DOB",className:"form-input",name:"dob",value:g.dob,onChange:A=>i(A),disabled:!!(a!=null&&a.is_submited)}),t("div",{className:"text-danger mt-1",children:C.dob})]}),t("div",{children:t("button",{type:"button",className:"btn btn-primary !mt-6",onClick:()=>E(),disabled:b,children:b?"Please Wait...":"Submit"})})]})]})})})})]})})}function He(){const e=L(s=>s.themeConfig.authToken),n=L(s=>s.themeConfig.riskprofileToken),h=$(),c=Y(),{url:_,riskProfile:r}=c.state,u=z();f.useEffect(()=>{(!n||!e)&&(h(k("")),h(K("")))},[e,n]);const[a]=f.useState({phone:r.phone?r.phone:"",pan:r.pan?r.pan:"",full_name:r.full_name?r.full_name:"",dob:r.dob?r.dob:"",email:r.email?r.email:"",is_verified:!1}),[d,m]=f.useState(a),[v,g]=f.useState({}),S=s=>{const{value:w,name:E}=s.target;g({...v,[E]:""}),m({...d,[E]:w})},[C,N]=f.useState(!1),i=async s=>{var E;N(!0);try{const D=await j({method:"post",url:_+"api/customer-riskprofile-verify-pan",data:s,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e,riskprofileToken:n}});if(D.data.status=="success"){const T=D.data.riskprofile,F=D.data.riskProfileSetting,B=D.data.url;if(console.log("riskprofile",T),T!=null&&T.is_verified)return alert("already verified !!!! Download"),0;if(T!=null&&T.is_submited&&!(T!=null&&T.is_verified))return alert("directly verification"),0;u("/riskprofile-question-answer",{state:{riskProfileSetting:F,url:B}})}else alert("Failed")}catch(D){if(D.response.status==401,((E=D==null?void 0:D.response)==null?void 0:E.status)===422){const T=D.response.data.errors;let F={};for(var w in T)F={...F,[w]:T[w][0]},console.log(T[w][0]);g(F)}}finally{N(!1)}},x=()=>{g({});let s={};return d.pan||(s={...s,pan:"pan number is required"}),d.full_name||(s={...s,full_name:"full_name is required"}),d.dob||(s={...s,dob:"date of birth is required"}),d.email||(s={...s,email:"email address is required"}),g(s),{totalErrors:Object.keys(s).length}},b=()=>{if(x().totalErrors)return!1;const w=new FormData;w.append("pan",d.pan),w.append("full_name",d.full_name),w.append("dob",d.dob),w.append("email",d.email),i(w)};return t("div",{children:l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:l("div",{className:"bg-white shadow-lg rounded-lg mt-9 ",children:[t("header",{className:"bg-[#f1faff] p-3 rounded-lg text-center",children:t("div",{className:"mt-2",children:t("h2",{className:"text-[20px] font-bold",children:" PAN Verification"})})}),l("form",{className:"space-y-5 p-4 ",children:[l("div",{children:[t("label",{htmlFor:"groupFname",children:"PAN Number "}),t("input",{type:"text",placeholder:"Enter Pan Number",className:"form-input",name:"pan",value:d.pan,onChange:s=>S(s),maxLength:10,disabled:!!(r!=null&&r.is_submited)}),t("div",{className:"text-danger mt-1",children:v.pan})]}),l("div",{children:[t("label",{htmlFor:"groupLname",children:"Full Name"}),t("input",{type:"text",placeholder:"Enter Full Name",className:"form-input",name:"full_name",value:d.full_name,onChange:s=>S(s),disabled:!!(r!=null&&r.is_submited)}),t("div",{className:"text-danger mt-1",children:v.full_name})]}),l("div",{children:[t("label",{htmlFor:"groupLname",children:"Email"}),t("input",{type:"email",placeholder:"Enter Email Address",className:"form-input",name:"email",value:d.email,onChange:s=>S(s),disabled:!!(r!=null&&r.is_submited)}),t("div",{className:"text-danger mt-1",children:v.email})]}),l("div",{children:[t("label",{htmlFor:"groupLname",children:"Date Of Birth"}),t("input",{type:"date",placeholder:"Enter DOB",className:"form-input",name:"dob",value:d.dob,onChange:s=>S(s),disabled:!!(r!=null&&r.is_submited)}),t("div",{className:"text-danger mt-1",children:v.dob})]}),t("div",{children:t("button",{type:"button",className:"btn btn-primary !mt-6",onClick:()=>b(),disabled:C,children:C?"Please Wait...":"Submit"})})]})]})})})})]})})}function Ze(){const e=Y(),{riskProfileSetting:n,url:h}=e.state||{},c=JSON.parse(n.questions);return t(R,{children:l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:l("div",{className:"bg-white shadow-lg rounded-lg mt-9 ",children:[t("header",{className:"bg-[#f1faff] p-3 rounded-lg text-center",children:t("div",{className:"mt-2",children:t("h2",{className:"text-[20px] font-bold",children:"Risk Profile Qusetions"})})}),t(Qe,{questions:c,url:h})]})})})})]})})}const Qe=({questions:e,url:n})=>{const h=(e==null?void 0:e.length)-1,[c,_]=f.useState(0),[r,u]=f.useState([]),a=(v,g)=>{const S=[...r];S[v]={question:e[v].question,option:g},u(S),v!=h&&_(C=>C+1)},[d,m]=f.useState(!1);return t(R,{children:d?t(Xe,{answers:r,url:n}):l("div",{className:"p-4",children:[l("h2",{className:"text-[18px] text-[#009688] font-bold mb-4 text-left",children:[c+1,". ",e[c].question]}),t("ul",{className:"list-none text-left pl-0",children:JSON.parse(e[c].options).map(v=>{var g,S;return t("li",{className:"text-left",children:l("label",{className:"inline-flex  gap-2 items-center mb-3",children:[t("input",{type:"radio",name:"default_radio",onChange:()=>a(c,v),className:"form-radio text-success border-2 ",value:{index:c,option:v},checked:((S=(g=r[c])==null?void 0:g.option)==null?void 0:S.option)===v.option}),t("p",{className:"text-gray-600 font-bold",children:v.option})]})},v.option)})}),l("div",{className:"flex justify-between mt-4 items-center space-x-6",children:[c?t("button",{className:"btn btn-sm btn-dark",onClick:()=>_(v=>v-1),children:"Back"}):null,h===c&&r[c]?t("button",{className:"btn btn-sm btn-success",onClick:()=>m(!0),children:"Submit"}):r[c]?t("button",{className:"btn btn-sm btn-dark",onClick:()=>_(v=>v+1),children:"Next"}):null]})]})})},Xe=({answers:e,url:n})=>{const h=L(d=>d.themeConfig.authToken),c=L(d=>d.themeConfig.riskprofileToken),_=z(),[r,u]=f.useState(!1),a=async()=>{try{u(!0);const d=await j({method:"post",url:`${n}/api/customer-riskprofile-answers`,data:{answers:JSON.stringify(e)},headers:{"Content-Type":"application/json",Authorization:"Bearer "+h,riskprofileToken:c}});d.data.status=="success"&&d.data.action=="e-sign"&&_("/riskprofile-e-sign",{state:{riskProfile:d.data.riskProfile,url:n}})}catch(d){alert(d)}finally{u(!1)}};return t(R,{children:l("div",{className:"p-4",children:[t("div",{children:e.map((d,m)=>l("div",{className:"mb-2",children:[l("h4",{className:"font-bold text-[#009688] text-[14px]",children:[m+1,". ",d.question]}),t("p",{className:"font-bold text-gray-600",children:d.option.option})]},m))}),t("div",{className:"flex justify-end",children:t("button",{className:"btn btn-success mt-4 shadow ",onClick:()=>a(),disabled:r,children:r?"Please Wait":"Continue"})})]})})};function et({company:e,mainAction:n}){const h=Y(),{url:c,phone:_,token:r,questions:u}=h.state||{};console.log("questions",u),console.log(_),console.log(r),console.log(c),f.useEffect(()=>{g()},[]);const[a,d]=f.useState(!0),[m,v]=f.useState([]),g=async()=>{d(!0);try{const i=await j({method:"get",url:`${c}api/customer-riskprofile-result`,params:{phone:_,token:r},headers:{"Content-Type":"multipart/form-data"}});i.data.status=="success"&&(alert("success"),v(i.data.riskprofile)),console.log(i)}catch(i){console.log(i)}finally{d(!1)}},[S,C]=f.useState(!1),N=async()=>{C(!0);try{const i=await j({method:"get",url:`${c}api/customer-riskprofile-verify`,params:{phone:_,token:r},headers:{"Content-Type":"multipart/form-data"}});i.data.status=="success"&&v(i.data.riskprofile)}catch(i){console.log(i)}finally{C(!1)}};return t("div",{children:a?t(M,{}):t("div",{children:t("div",{children:m.is_verified?l(R,{children:[t("b",{children:m.full_name}),t("button",{children:"Download Riskprofile"})]}):m!=null&&m.pdf?t("div",{style:{width:"100%",height:"100vh",border:"none"},children:t("iframe",{src:m==null?void 0:m.pdf,title:"My Embedded Content",width:"100%",height:"100%",style:{border:"none"}})}):t(R,{children:t("button",{className:"btn btn-secondary m-auto",disabled:S,onClick:()=>N(),children:S?"Please Wait...":"Submit Riskprofile"})})})})})}function tt(){const e=L(g=>g.themeConfig.authToken),n=L(g=>g.themeConfig.riskprofileToken),h=Y(),{url:c}=h.state||{},[_,r]=f.useState(!1),[u,a]=f.useState(null),[d,m]=f.useState(!1),v=async()=>{r(!0),a(null),m(!1);try{const g=await j({method:"get",url:`${c}/api/customer-riskprofile-verify`,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+e,riskprofileToken:n}});console.log(g.data.data),g.data.status=="success"&&(g.data.action=="verified"?m(!0):g.data.action=="pdf"&&a(g.data.pdf))}catch(g){console.log(g)}finally{r(!1)}};return t("div",{children:u?t("div",{style:{width:"100%",height:"100vh",border:"none"},children:t("iframe",{src:u,title:"My Embedded Content",width:"100%",height:"100%",style:{border:"none"}})}):d?t(W,{}):t(R,{children:l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:l("div",{className:"bg-white shadow-lg rounded-lg mt-9  ",children:[t("header",{className:"bg-[#f1faff] p-3 rounded-lg text-center",children:t("div",{className:"mt-2",children:t("h2",{className:"text-[20px] font-bold",children:"E-Sign With Aadhaar"})})}),l("div",{className:"p-4",children:[t("b",{children:"You need to verify using Aadhaar e-Sign. "}),t("div",{className:"mt-4 font-bold",children:l("small",{className:"text-[#f8538d]",children:["Note:- ",t("br",{}),"You need to enter your 12-digit Aadhaar number, and you will receive an OTP on your Aadhaar-linked phone number."]})}),t("button",{className:"btn btn-success shadow mt-6",disabled:_,onClick:()=>v(),children:_?"Please Wait...":"Continue Aadhaar e-Sign"})]})]})})})})]})})})}function re({phone:e,token:n,url:h}){return l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full max-w-[500px] rounded-md",children:t("div",{className:"relative flex flex-col justify-center rounded-md dark:bg-black/50 lg:min-h-[auto] ",children:t(nt,{phone:e,token:n,url:h})})})})]})}const nt=({phone:e,token:n,url:h})=>{const c=L(i=>i.themeConfig.publicData),[_]=f.useState({password:"",otp:"",phone:e,token:n,isChecked:!1}),[r,u]=f.useState(_),[a,d]=f.useState({}),m=i=>{const{value:x,name:b}=i.target;d({...a,[b]:""}),u({...r,[b]:x})},v=()=>{d({});let i={};return r.phone||(i={...i,phone:"email or employee id  is required"}),d(i),{totalErrors:Object.keys(i).length}},[g,S]=f.useState(!1),C=async i=>{var b;console.log("Checking Login User API...."),S(!0);try{(await j({method:"post",url:h+"/api/customer-kyc-otp-generate",data:i,headers:{"Content-Type":"multipart/form-data"}})).data.status=="success"?u({...r,isChecked:!0}):alert("Failed")}catch(s){if(console.log(s),((b=s==null?void 0:s.response)==null?void 0:b.status)===422){const w=s.response.data.errors;let E={};for(var x in w)E={...E,[x]:w[x][0]};d(E)}}finally{S(!1)}},N=()=>{if(v().totalErrors)return!1;const x=new FormData;x.append("phone",r.phone),x.append("token",r.token),C(x)};return t(R,{children:r.isChecked?t(at,{params:r,setParams:u,defaultParams:_,url:h}):l("div",{className:"bg-white shadow-lg rounded-lg mt-9",children:[l("header",{className:"px-5 pb-5",children:[c!=null&&c.favicon?t("div",{className:"flex-none text-center",children:t("img",{className:"w-16 h-16 ltr:-ml-1 rtl:-mr-1 inline mt-5",src:`${c.favicon}`})}):null,l("div",{className:"mt-2",children:[t("h2",{className:"text-2xl font-bold",children:"Verify"}),t("span",{className:"font-bold text-[#0b6917]",children:"Verify your mobile number to upload KYC"})]})]}),t("div",{className:"bg-gray-100 text-center px-5 py-10",children:l("form",{autoComplete:"off",onSubmit:i=>{i.preventDefault(),N()},className:"justify-center rounded",children:[l("div",{children:[t("label",{htmlFor:"phone",className:"text-left",children:"Phone"}),l("div",{className:"relative text-white-dark mb-2",children:[t("input",{name:"phone",type:"tel",disabled:!0,placeholder:"Enter Phone or User ID",className:"form-input ps-10 cursor-not-allowed bg-[#DBE7FF] placeholder:text-white-dark font-extrabold text-[16px]",value:r.phone,onChange:i=>m(i)}),t("span",{className:"absolute start-4 top-1/2 -translate-y-1/2",children:t(H,{size:20})})]}),t("span",{className:"text-danger font-bold ",children:a!=null&&a.phone?a.phone:""})]}),t("div",{className:"max-w-[260px] mx-auto mt-4",children:t("button",{type:"submit",className:"btn btn-gradient !mt-6 w-full border-0 w-100px uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",disabled:g,children:g?"Please Wait":"Get OTP"})})]})}),t("footer",{children:l("div",{className:"bg-[#e3e7fc] mt-10 p-3 font-semibold text-[13px]",children:["Note:-",l("p",{children:["To verify, you need to enter your ",t("b",{children:"Aadhaar number"}),"  and ",t("b",{children:"PAN number"})]}),l("p",{children:["You will receive an ",t("b",{children:"OTP"})," to your Aadhaar-linked phone"]})]})})]})})},at=({params:e,setParams:n,defaultParams:h,url:c})=>{const _=$(),r=z(),[u,a]=f.useState({}),d=x=>{const{value:b,name:s}=x.target,[w,E]=s.split("_"),D=parseInt(E,10);if(w==="otp"){if(a({...u,otp:""}),b){const B=document.querySelector(`input[name=otp_${D+1}]`);B&&B.focus()}const T=document.querySelectorAll(".otp");let F="";T.forEach(B=>{F+=B.value}),n({...e,otp:F})}else a({...u,[s]:""}),n({...e,[s]:b})},m=(x,b)=>{if(x.key==="Backspace"&&!x.target.value){const s=document.querySelector(`input[name=otp_${b-1}]`);s&&(s.focus(),s.value="")}},v=()=>{a({});let x={};return e.otp||(x={...x,otp:"otp is required",password:""}),a(x),{totalErrors:Object.keys(x).length}},[g,S]=f.useState(!1),C=async x=>{var s;S(!0);try{const w=await j({method:"post",url:c+"/api/customer-kyc-otp-verify",data:x,headers:{"Content-Type":"multipart/form-data"}});w.data.status=="success"?(_(k(w.data.authToken)),_(Ae(e.token)),r("/kyc-form",{state:{url:c}})):alert(w.data.message)}catch(w){if(console.log(w),((s=w==null?void 0:w.response)==null?void 0:s.status)===422){const E=w.response.data.errors;let D={};for(var b in E)D={...D,[b]:E[b][0]};a(D)}}finally{S(!1)}},N=()=>{if(v().totalErrors)return!1;const b=new FormData;b.append("otp",e.otp),b.append("phone",e.phone),b.append("token",e.token),C(b)},i=f.useRef(null);return f.useEffect(()=>{i.current&&i.current.focus()},[]),l("div",{className:"bg-white shadow-lg rounded-lg mt-9",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none",children:t("img",{src:`https://ui-avatars.com/api/?background=random&name=${e.user_name}&length=3`,className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3 rounded-full h-12 w-12 object-cover",alt:""})}),t("div",{className:"text-[18px] font-medium text-gray-500",children:e.user_name})]}),t("div",{className:"bg-gray-100 text-center px-5 py-6",children:l("form",{autoComplete:"off",onSubmit:x=>{x.preventDefault(),N()},className:"justify-center rounded",children:[t("label",{className:"text-2xl font-bold mb-8",children:"Enter 4 Digit otp"}),t("div",{className:"flex items-center justify-center gap-3 mb-2",children:Array.from({length:4}).map((x,b)=>t("input",{type:"password",ref:b===0?i:null,value:e.otp.charAt(b),name:`otp_${b}`,onChange:d,onKeyDown:s=>m(s,b),className:"w-14 h-14 text-center text-2xl font-extrabold text-slate-900 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 otp"},b))}),u.otp?t("b",{className:"text-danger font-bold p-2",children:u.otp}):"",t("div",{className:"max-w-[260px] mx-auto mt-4",children:t("button",{type:"submit",onClick:()=>N(),disabled:g,className:"btn btn-gradient !mt-6 w-full border-0 w-100px uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]",children:g?"Please Wait":"Verify OTP"})})]})})]})};function st(){const e=L(s=>s.themeConfig.authToken),n=L(s=>s.themeConfig.kycToken),h=Y(),_=new URLSearchParams(h.search).get("token"),r=h.pathname.split("/")[1],u=z(),d=`https://${r+"."+m()}`;function m(){const s=window.location.hostname,w=s.split(".");return s.includes("localhost")?"localhost:8000":w.length>2?w.slice(-2).join("."):s}f.useEffect(()=>{e&&n==_?u("/kyc-form",{state:{url:d}}):b()},[r,_]);const v=$(),[g,S]=f.useState(!0),[C,N]=f.useState(null),[i,x]=f.useState(null),b=async()=>{S(!0),N(null);try{const s=await j({method:"get",url:d+`/api/customer-check-kyc/${_}`,headers:{"Content-Type":"application/json"}});s.data.status=="success"?(v(O(s.data.setting)),N(s.data.phone)):s.data.status=="error"?(x(s.data.error),v(O(s.data.setting))):s.data.status=="verified"&&(v(O(s.data.setting)),u("/kyc-verified"))}catch{N(null)}finally{S(!1)}};return t("div",{children:g?t(M,{}):i?t(G,{error:i}):C?t(re,{phone:C,token:_,url:d}):null})}const ie=f.createContext(void 0),rt=({children:e})=>{const n=$(),h=L(u=>u.themeConfig.authUser),c=L(u=>u.themeConfig.settingData),_=L(u=>u.themeConfig.apiUrl),r=()=>{n(Pe("")),n(Te("")),localStorage.clear(),window.location="/login"};return t(ie.Provider,{value:{logout:r,authUser:h,settingData:c,apiUrl:_},children:e})},it=()=>{const e=f.useContext(ie);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function ot({fields:e,params:n,setParams:h,errors:c,setErros:_}){const r=u=>{const{value:a,name:d}=u.target;_({...c,[d]:""}),h({...n,[d]:a})};return t("div",{children:e==null?void 0:e.map((u,a)=>{var d;return u[2]?u[4]=="input"?l("div",{className:"mb-2",children:[l("label",{children:[u[1]," ",u[3]&&t("span",{className:"text-red-500",children:"*"})]}),t("input",{name:u[0],value:n[u[0]],onChange:m=>r(m),type:u[5],placeholder:u[1],className:"form-input"}),t("small",{className:"font-bold text-[#ff0303]",children:c==null?void 0:c[u[0]]})]},a):u[4]=="select"?l("div",{className:"mb-2",children:[t("label",{children:u[1]}),l("select",{className:"form-select text-white-dark",name:u[0],value:n[u[0]],onChange:m=>r(m),children:[t("option",{value:"",children:"--select--"}),(d=u[6])==null?void 0:d.map((m,v)=>t("option",{value:m,children:m},v))]}),t("small",{className:"font-bold text-[#ff0303]",children:c==null?void 0:c[u[0]]})]},a):null:null})})}function lt({fields:e,params:n,setParams:h,errors:c,setErros:_}){const r=u=>{const{value:a,name:d}=u.target;_(m=>({...m,[d]:""})),d=="is_same_address"?u.target.checked?h({...n,permanent_address_1:n.current_address_1,permanent_address_2:n.current_address_2,permanent_address_city:n.current_address_city,permanent_address_state:n.current_address_state,permanent_address_pincode:n.current_address_pincode,permanent_address_country:n.current_address_country,is_same_address:1}):h({...n,permanent_address_1:"",permanent_address_2:"",permanent_address_city:"",permanent_address_state:"",permanent_address_pincode:"",permanent_address_country:"",is_same_address:0}):h(m=>({...m,[d]:a}))};return console.log(e),t("div",{children:e==null?void 0:e.map((u,a)=>u[2]?l("div",{className:"mb-4",children:[l("div",{className:"flex justify-between items-center",children:[t("b",{className:"block mb-2",children:u[1]}),l("label",{className:"inline-flex gap-1",children:[t("input",{type:"checkbox",className:"form-checkbox",name:"is_same_address",onChange:d=>r(d),checked:n.is_same_address}),t("span",{children:"Same as Current Address"})]})]}),a&&n.is_same_address?null:t("div",{children:u[4]&&typeof u[4]=="object"?Object.entries(u[4]).map(([d,m])=>{var v;return t("div",{className:"mb-4",children:m[0]==="input"?l("div",{children:[l("label",{className:"block mb-2 font-medium",children:[m[2]," ",u[3]&&t("span",{className:"text-red-500",children:"*"})]}),t("input",{name:d,type:m[1],value:(n==null?void 0:n[d])||"",onChange:r,placeholder:m[2],className:"form-input w-full border border-gray-300 rounded px-3 py-2",required:!0}),t("small",{className:"font-bold text-red-500",children:c==null?void 0:c[d]})]}):m[0]==="select"?l("div",{children:[l("label",{className:"block mb-2 font-medium",children:[m[2]," ",u[3]&&t("span",{className:"text-red-500",children:"*"})]}),l("select",{name:d,value:(n==null?void 0:n[d])||"",onChange:r,className:"form-select w-full border border-gray-300 rounded px-3 py-2",children:[t("option",{value:"",disabled:!0,children:"---select---"}),(v=m[1])==null?void 0:v.map((g,S)=>t("option",{value:g,children:g},S))]}),t("small",{className:"font-bold text-red-500",children:c==null?void 0:c[d]})]}):null},d)}):null})]},a):null)})}function dt({fields:e,params:n,setParams:h,errors:c,setErros:_,preview:r,setPreview:u}){console.log(e);const a=f.useRef(null),d=f.useRef(null),m=f.useRef(null),v=f.useRef(null),g=N=>{const{name:i}=N.target;if(_({...c,[i]:""}),N.target.files[0]){if(N.target.files[0].type&&N.target.files[0].type.indexOf("image")===-1){_({...c,[i]:"file is not a valid image"});return}const x=25*1024*1024;if(N.target.files[0].size>x){_({...c,[i]:"maximum file size is 2 mb"});return}const b=new FileReader;b.onload=function(s){const w={photo:"photoPreview",pan_document:"panDocumentPreview",aadhaar_front_document:"aadhaarFrontDocument",aadhar_back_document:"aadharBackDocument"};w[i]&&u(E=>({...E,[w[i]]:b.result})),h({...n,[i]:N.target.files[0]})},b.readAsDataURL(N.target.files[0])}},S={photo:a,pan_document:d,aadhaar_front_document:m,aadhar_back_document:v},C={photo:r.photoPreview,pan_document:r.panDocumentPreview,aadhaar_front_document:r.aadhaarFrontDocument,aadhar_back_document:r.aadharBackDocument};return t("div",{children:e==null?void 0:e.map(N=>N[2]?l("div",{className:"mb-3",children:[l("label",{children:[N[1],"  ",N[3]&&t("span",{className:"text-red-500",children:"*"})]}),t("input",{ref:S[N[0]],name:N[0],type:"file",onChange:i=>g(i),className:"form-input hidden",accept:"image/*"}),t("span",{className:"w-full relative",children:t("img",{className:` ${N[0]=="photo"?"max-w-[200px] max-h-[200px]":"max-w-[300px] max-h-[250px]"}   overflow-hidden object-cover rounded`,onClick:()=>S[N[0]].current.click(),src:C[N[0]]||"",alt:"kyc_photo"})}),t("small",{className:"font-bold text-red-500",children:c==null?void 0:c[N[0]]})]},N[0]):null)})}function ct({fields:e,params:n,setParams:h,errors:c,setErros:_}){const r=m=>{const{value:v,name:g,type:S,checked:C}=m.target;console.log(v,g,S,C),_({...c,[g]:""}),h({...n,[g]:v}),console.log(n)},u=()=>{if(d.current){const m=d.current.toDataURL();h({...n,signature:m})}},a=m=>{m.preventDefault(),d.current&&(d.current.clear(),h({...n,kyc_signature:null}))},d=f.useRef(null);return t("div",{children:e==null?void 0:e.map((m,v)=>{var g;return t("div",{children:m[2]?m[4]=="radio"?l("div",{children:[l("label",{children:[m[1]," ",m[3]&&t("span",{className:"text-red-500",children:"*"})]}),t("div",{className:"flex gap-4",children:(g=m[5])==null?void 0:g.map((S,C)=>t("div",{className:"gap-4",children:l("label",{className:"inline-flex",children:[t("input",{type:"radio",name:m[0],className:"form-radio",onChange:N=>r(N),checked:n[m[0]]==S,value:S}),t("span",{className:"ml-1",children:S})]})},C))}),t("small",{className:"font-bold text-[#ff0303]",children:c==null?void 0:c[m[0]]})]}):m[4]=="input"&&m[5]=="file"?l(R,{children:[t("div",{children:l("label",{children:[m[1]," ",m[3]&&t("span",{className:"text-red-500",children:"*"})]})}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 ",children:t("div",{className:"border h-20 lg:h-auto",children:t(xe,{penColor:"red",canvasProps:{className:"signature"},ref:d,onEnd:u})})}),t("small",{className:"font-bold text-[#ff0303]",children:c==null?void 0:c[m[0]]}),t("div",{children:n!=null&&n.is_verified?null:t("button",{className:"badge bg-danger",onClick:a,children:"Clear"})})]}):null:null},v)})})}function ut({kyc:e,url:n,fields:h,isMultyTab:c,tabs:_,activeTab:r,setActiveTab:u,params:a,errors:d,setErros:m}){const v=L(p=>p.themeConfig.authToken),g=L(p=>p.themeConfig.kycToken),S=_.length-1,C=_.indexOf(`${r}`),N=z(),i=()=>{C&&(u(_[C-1]),window.scrollTo({top:0,behavior:"smooth"}))};function x(p){return/^[a-z]{5}\d{4}[a-z]$/i.test(p)}function b(p){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(p)}function s(p){return/^\d{10}$/.test(p)}function w(p){return/^\d{12}$/.test(p)}function E(p){return/^\d{6}$/.test(p)}const D=()=>{let p=[];if(r!="Address Details")p=h[r].filter(I=>I[3]).map(I=>I[0]);else{const P=h[r].filter(q=>q).map(q=>q[0]);P.includes("address_for_correspondence")&&(p=[...p,"current_address_1","current_address_2","current_address_city","current_address_state","current_address_pincode","current_address_country"]),P.includes("permanent_address_of_resident")&&(p=[...p,"permanent_address_1","permanent_address_2","permanent_address_city","permanent_address_state","permanent_address_pincode","permanent_address_country"])}m({});let o={};return console.log("mandatoryFields",r),r=="Personal Details"?(!a.first_name&&p.includes("first_name")&&(o={...o,first_name:"First Name is required"}),!a.last_name&&p.includes("last_name")&&(o={...o,last_name:"Last Name is required"}),!a.father_or_spouse_name&&p.includes("father_or_spouse_name")&&(o={...o,father_or_spouse_name:"Father or Spouse name is required"}),!a.gender&&p.includes("gender")&&(o={...o,gender:"gender is required"}),!a.phone&&p.includes("phone")?o={...o,phone:"phone is required"}:a.phone&&!s(a.phone)&&(o={...o,phone:"invalid phone number"}),!a.email&&p.includes("email")?o={...o,email:"email is required"}:a.email&&!b(a.email)&&(o={...o,email:"invalid email address"}),!a.marital_status&&p.includes("marital_status")&&(o={...o,marital_status:"Marital Status is required"}),!a.date_of_birth&&p.includes("date_of_birth")&&(o={...o,date_of_birth:"Date of Birth is required"}),!a.pan&&p.includes("pan")?o={...o,pan:"pan is required"}:a.pan&&!x(a.pan)&&(o={...o,pan:"Invalid PAN Number "}),!a.aadhaar_number&&p.includes("aadhaar_number")?o={...o,aadhaar_number:"aadhaar number is required"}:a.aadhaar_number&&!w(a.aadhaar_number)&&(o={...o,aadhaar_number:"invalid aadhaar number"}),!a.nationality&&p.includes("nationality")&&(o={...o,nationality:"nationality is required"}),!a.residential_status&&p.includes("residential_status")&&(o={...o,residential_status:"residential status is required"})):r=="Address Details"?(!a.current_address_1&&p.includes("current_address_1")&&(o={...o,current_address_1:"address is required"}),!a.current_address_2&&p.includes("current_address_2")&&(o={...o,current_address_2:"address is required"}),!a.current_address_city&&p.includes("current_address_city")&&(o={...o,current_address_city:"city is required"}),!a.current_address_state&&p.includes("current_address_state")&&(o={...o,current_address_state:"state is required"}),!a.current_address_pincode&&p.includes("current_address_pincode")?o={...o,current_address_pincode:"pincode is required"}:a.current_address_pincode&&!E(a.current_address_pincode)&&(o={...o,current_address_pincode:"invalid pincode"}),!a.current_address_country&&p.includes("current_address_country")&&(o={...o,current_address_country:"country is required"}),!a.is_same_address&&!a.permanent_address_1&&p.includes("permanent_address_1")&&(o={...o,permanent_address_1:"address is required"}),!a.is_same_address&&!a.permanent_address_2&&p.includes("permanent_address_2")&&(o={...o,permanent_address_2:"address is required"}),!a.is_same_address&&!a.permanent_address_city&&p.includes("permanent_address_city")&&(o={...o,permanent_address_city:"city is required"}),!a.is_same_address&&!a.permanent_address_state&&p.includes("permanent_address_state")&&(o={...o,permanent_address_state:"state is required"}),!a.is_same_address&&!a.permanent_address_pincode&&p.includes("permanent_address_pincode")?o={...o,permanent_address_pincode:"pincode is required"}:a.permanent_address_pincode&&!E(a.permanent_address_pincode)&&(o={...o,permanent_address_pincode:"invalid pincode"}),!a.is_same_address&&!a.permanent_address_country&&p.includes("permanent_address_country")&&(o={...o,permanent_address_country:"country is required"})):r=="Documents"?(!(e!=null&&e.photo)&&!a.photo&&p.includes("photo")&&(o={...o,photo:"photo is required"}),!(e!=null&&e.pan_document)&&!a.pan_document&&p.includes("pan_document")&&(o={...o,pan_document:"pan document is required"}),!(e!=null&&e.aadhaar_front_document)&&!a.aadhaar_front_document&&p.includes("aadhaar_front_document")&&(o={...o,aadhaar_front_document:"aadhaar front side is required"}),!(e!=null&&e.aadhar_back_document)&&!a.aadhar_back_document&&p.includes("aadhar_back_document")&&(o={...o,aadhar_back_document:"aadhar back side is required"})):r=="Declaration"&&(!a.politician_by_profession&&p.includes("politician_by_profession")&&(o={...o,politician_by_profession:"politician by profession is required"}),!a.years_of_experience_in_trading&&p.includes("years_of_experience_in_trading")&&(o={...o,years_of_experience_in_trading:"years of experience is required"}),!a.risk_appetite&&p.includes("risk_appetite")&&(o={...o,risk_appetite:"risk appetite is required"}),!a.annual_turnover&&p.includes("annual_turnover")&&(o={...o,annual_turnover:"annual turnover is required"}),!a.age_declaration&&p.includes("age_declaration")&&(o={...o,age_declaration:"age declaration is required"}),!a.signature&&p.includes("signature")&&(o={...o,signature:"signature is required"})),m(o),{totalErrors:Object.keys(o).length}},T=()=>{if(D().totalErrors)return!1;const o=new FormData;if(o.append("is_multytap",c),c)o.append("activeTab",r),r=="Personal Details"?h[r].filter(P=>P[2]).map(P=>P[0]).forEach(P=>{o.append(P,a[P])}):r=="Address Details"?(o.append("current_address_1",a.current_address_1),o.append("current_address_2",a.current_address_2),o.append("current_address_city",a.current_address_city),o.append("current_address_state",a.current_address_state),o.append("current_address_pincode",a.current_address_pincode),o.append("current_address_country",a.current_address_country),a.is_same_address?(o.append("permanent_address_1",a.current_address_1),o.append("permanent_address_2",a.current_address_2),o.append("permanent_address_city",a.current_address_city),o.append("permanent_address_state",a.current_address_state),o.append("permanent_address_pincode",a.current_address_pincode),o.append("permanent_address_country",a.current_address_country)):(o.append("permanent_address_1",a.permanent_address_1),o.append("permanent_address_2",a.permanent_address_2),o.append("permanent_address_city",a.permanent_address_city),o.append("permanent_address_state",a.permanent_address_state),o.append("permanent_address_pincode",a.permanent_address_pincode),o.append("permanent_address_country",a.permanent_address_country))):r=="Documents"?h[r].filter(P=>P[2]).map(P=>P[0]).forEach(P=>{o.append(P,a[P])}):r=="Declaration"&&(h[r].filter(P=>P[2]).map(P=>P[0]).forEach(P=>{o.append(P,a[P])}),o.append("signature",a.signature?a.signature:""));else{console.log("tabs",_);const I=[];_.forEach(P=>{if(P!="Address Details"){const q=h[P].filter(U=>U[2]).map(U=>U[0]);I.push(...q)}else console.log(h["Address Details"][1]),h["Address Details"][0][2]&&I.push("current_address_1","current_address_2","current_address_city","current_address_state","current_address_pincode","current_address_country"),h["Address Details"][1][2]&&I.push("permanent_address_1","permanent_address_2","permanent_address_city","permanent_address_state","permanent_address_pincode","permanent_address_country");I.forEach(q=>{o.append(q,a[q])})})}A(o)},[F,B]=f.useState(!1),A=async p=>{var I;B(!0);try{(await j({method:"post",url:n+"/api/customer-kyc-form",data:p,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+v,kycToken:g}})).data.status=="success"&&(c?C==S?N("/kyc-submited"):(u(_[C+1]),window.scrollTo({top:0,behavior:"smooth"})):N("/kyc-submited"))}catch(P){if(console.log(P),((I=P==null?void 0:P.response)==null?void 0:I.status)===422){const q=P.response.data.errors;let U={};for(var o in q)U={...U,[o]:q[o][0]},console.log(q[o][0]);m(U)}}finally{B(!1)}};return l("div",{className:`flex ${c&&C?" justify-between":"justify-end"} `,children:[c&&C?t("button",{className:"btn btn-sm btn-primary shadow",disabled:F,onClick:()=>i(),children:"Back"}):null,t("button",{className:"btn btn-sm btn-primary shadow",onClick:()=>T(),disabled:F,children:F?"Please Wait...":"Submit"})]})}function mt({kyc:e,fields:n,isMultyTab:h,url:c}){const _=n?Object.keys(n):[],[r,u]=f.useState(_[0]),[a]=f.useState({first_name:e!=null&&e.first_name?e==null?void 0:e.first_name:"",last_name:e!=null&&e.last_name?e==null?void 0:e.last_name:"",father_or_spouse_name:e!=null&&e.father_or_spouse_name?e==null?void 0:e.father_or_spouse_name:"",gender:e!=null&&e.gender?e==null?void 0:e.gender:"",phone:e!=null&&e.phone?e==null?void 0:e.phone:"",email:e!=null&&e.email?e==null?void 0:e.email:"",marital_status:e!=null&&e.marital_status?e==null?void 0:e.marital_status:"",date_of_birth:e!=null&&e.date_of_birth?e==null?void 0:e.date_of_birth:"",pan:e!=null&&e.pan?e==null?void 0:e.pan:"",aadhaar_number:e!=null&&e.aadhaar_number?e==null?void 0:e.aadhaar_number:"",nationality:e!=null&&e.nationality?e==null?void 0:e.nationality:"",residential_status:e!=null&&e.residential_status?e==null?void 0:e.residential_status:"",current_address_1:e!=null&&e.current_address_1?e==null?void 0:e.current_address_1:"",current_address_2:e!=null&&e.current_address_2?e==null?void 0:e.current_address_2:"",current_address_city:e!=null&&e.current_address_city?e==null?void 0:e.current_address_city:"",current_address_state:e!=null&&e.current_address_state?e==null?void 0:e.current_address_state:"",current_address_pincode:e!=null&&e.current_address_pincode?e==null?void 0:e.current_address_pincode:"",current_address_country:e!=null&&e.current_address_country?e==null?void 0:e.current_address_country:"",is_same_address:e!=null&&e.is_same_address?e==null?void 0:e.is_same_address:0,permanent_address_1:e!=null&&e.permanent_address_1?e==null?void 0:e.permanent_address_1:"",permanent_address_2:e!=null&&e.permanent_address_2?e==null?void 0:e.permanent_address_2:"",permanent_address_city:e!=null&&e.permanent_address_city?e==null?void 0:e.permanent_address_city:"",permanent_address_state:e!=null&&e.permanent_address_state?e==null?void 0:e.permanent_address_state:"",permanent_address_pincode:e!=null&&e.permanent_address_pincode?e==null?void 0:e.permanent_address_pincode:"",permanent_address_country:e!=null&&e.permanent_address_country?e==null?void 0:e.permanent_address_country:"",photo:"",pan_document:"",aadhaar_front_document:"",aadhar_back_document:"",politician_by_profession:e!=null&&e.politician_by_profession?e==null?void 0:e.politician_by_profession:"",years_of_experience_in_trading:e!=null&&e.years_of_experience_in_trading?e==null?void 0:e.years_of_experience_in_trading:"",risk_appetite:e!=null&&e.risk_appetite?e==null?void 0:e.risk_appetite:"",annual_turnover:e!=null&&e.annual_turnover?e==null?void 0:e.annual_turnover:"",age_declaration:e!=null&&e.age_declaration?e==null?void 0:e.age_declaration:"",signature:e!=null&&e.signature?e==null?void 0:e.signature:""}),[d,m]=f.useState(a),[v,g]=f.useState({}),[S,C]=f.useState({photoPreview:c+"/avatar.png",panDocumentPreview:c+"/document.png",aadhaarFrontDocument:c+"/document.png",aadharBackDocument:c+"/document.png"});return f.useEffect(()=>{e&&C(N=>({...N,photoPreview:e.photo?c+e.photo:N.photoPreview,panDocumentPreview:e.pan_document?c+e.pan_document:N.panDocumentPreview,aadhaarFrontDocument:e.aadhaar_front_document?c+e.aadhaar_front_document:N.aadhaarFrontDocument,aadharBackDocument:e.aadhar_back_document?c+e.aadhar_back_document:N.aadharBackDocument}))},[e]),l("div",{children:[t("div",{className:"absolute inset-0",children:t("img",{src:"/assets/images/auth/bg-gradient.png",alt:"image",className:"h-full w-full object-cover"})}),t("div",{className:"relative flex  items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat  dark:bg-[#060818]",children:t("div",{className:"relative w-full rounded-md",children:l("div",{className:"bg-white p-4 rounded-lg shadow-lg w-full max-w-[600px] mx-auto",children:[h?t(R,{children:t("div",{className:"flex justify-center gap-4 mb-4",children:_.map((N,i)=>l("button",{className:`btn w-1/4  flex flex-col items-center ${r===N?"btn-danger":"btn-dark"} btn-sm shadow`,children:[t("span",{className:"text-xl mb-1",children:N=="Personal Details"?t(Ne,{size:25}):N=="Address Details"?t(we,{size:25}):N=="Documents"?t(Se,{size:25}):t(Ce,{size:25})}),t("h3",{className:"hidden md:block text-sm font-medium",children:N})]},i))})}):t(R,{}),l("div",{children:[t("h1",{className:"font-bold text-[16px] text-[#506690] mb-2 text-center",children:r}),!h||r=="Personal Details"?t(ot,{fields:n["Personal Details"],params:d,setParams:m,errors:v,setErros:g}):null,!h||r=="Address Details"?t(lt,{fields:n["Address Details"],params:d,setParams:m,errors:v,setErros:g}):null,!h||r=="Documents"?t(dt,{fields:n.Documents,params:d,setParams:m,errors:v,setErros:g,preview:S,setPreview:C}):null,!h||r=="Declaration"?t(ct,{fields:n.Declaration,params:d,setParams:m,errors:v,setErros:g}):null]}),_.length?t(ut,{kyc:e,url:c,fields:n,isMultyTab:h,tabs:_,activeTab:r,setActiveTab:u,params:d,errors:v,setErros:g}):null]})})})]})}function ht(){var N;const n=(N=Y().state)==null?void 0:N.url;it();const h=z(),c=L(i=>i.themeConfig.authToken),_=L(i=>i.themeConfig.kycToken),[r,u]=f.useState(!0),[a,d]=f.useState(null),[m,v]=f.useState(null),[g,S]=f.useState(1),C=async()=>{u(!0),d(null),v(null),S(1);try{const i=await j({method:"get",url:n+"/api/customer-kyc-form",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+c,kycToken:_}});i.data.status=="success"&&(i.data.isVarified?h("/kyc-verified"):(d(JSON.parse(i.data.kyc)),v(JSON.parse(i.data.kycSettings.fields)),S(i.data.kycSettings.is_multy_tab)))}catch(i){console.log(i),d(null),v(null),S(1)}finally{u(!1)}};return f.useEffect(()=>{C()},[c,_]),t("div",{children:r?t(se,{}):t(mt,{kyc:a,fields:m,isMultyTab:g,url:n})})}function oe(e){return X({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M11 20c-.801 0-1.555-.312-2.121-.879l-4-4c-.567-.566-.879-1.32-.879-2.121s.312-1.555.879-2.122c1.133-1.133 3.109-1.133 4.242 0l1.188 1.188 3.069-5.523c.526-.952 1.533-1.544 2.624-1.544.507 0 1.012.131 1.456.378.7.39 1.206 1.028 1.427 1.798.221.771.127 1.581-.263 2.282l-5 9c-.454.818-1.279 1.384-2.206 1.514-.139.019-.277.029-.416.029zm-4-8c-.268 0-.518.104-.707.293s-.293.439-.293.707.104.518.293.707l4 4c.223.221.523.33.844.283.312-.043.586-.232.737-.504l5-9c.13-.233.161-.503.088-.76-.073-.257-.243-.47-.478-.6-.473-.264-1.101-.078-1.357.388l-4.357 7.841-3.062-3.062c-.19-.189-.44-.293-.708-.293z"},child:[]}]})(e)}function pt(){return l("div",{className:"bg-white shadow-lg rounded-lg mt-9 max-w-[500px] m-auto",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none mb-5",children:t("div",{className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3",children:t(oe,{className:"w-full h-full text-green-500 "})})}),t("div",{className:"text-2xl font-bold text-green-500",children:"KYC Verified"})]}),t("div",{className:" text-center px-5 pb-6",children:t("b",{children:"Your KYC Verified Successfully!"})})]})}function ft(){return l("div",{className:"bg-white shadow-lg rounded-lg mt-9 max-w-[500px] m-auto",children:[l("header",{className:"text-center px-5 pb-5",children:[t("div",{className:"flex-none mb-5",children:t("div",{className:"inline-flex -mt-9 w-[72px] h-[72px] fill-current rounded-full border-4 border-white box-content shadow mb-3",children:t(oe,{className:"w-full h-full text-green-500 "})})}),t("div",{className:"text-2xl font-bold text-green-500",children:"KYC Submited"})]}),t("div",{className:" text-center px-5 pb-6",children:t("b",{children:"Your KYC Submited Successfully!"})})]})}function gt(){return t("div",{className:"flex justify-center items-center  ",children:l("div",{className:"bg-white p-8 rounded-lg  max-w-md w-full text-center transform transition-transform duration-300 hover:scale-105 border-2 border-[#c0f0d8]",children:[t("div",{className:"mb-6",children:t(J,{className:"mx-auto text-green-500 animate-pulse",size:100})}),t("h1",{className:"text-2xl font-bold text-[#009688] mb-4",children:"Agreement Accepted Successfully"}),t("p",{className:"font-bold text-[#506690]",children:"You have successfully Accepted your Agreement ."})]})})}const bt=[{path:"/",element:t(ze,{}),protected:!0},{path:"/:company/rp/:token",element:t(ke,{}),protected:!0},{path:"/:company/agmt/:token",element:t(Je,{}),protected:!0},{path:"/:company/kyc",element:t(st,{}),protected:!0},{path:"agreement-pan-verification",element:t(Ge,{}),protected:!0},{path:"riskprofile-pan-verification",element:t(He,{}),protected:!0},{path:"riskprofile-verified",element:t(W,{}),protected:!0},{path:"agreement-verified",element:t(gt,{}),protected:!0},{path:"riskprofile-question-answer",element:t(Ze,{}),protected:!0},{path:"riskprofile-e-sign",element:t(tt,{}),protected:!0},{path:"riskprofile-verification",element:t(et,{}),protected:!0},{path:"kyc-form",element:t(ht,{}),protected:!0},{path:"kyc-verified",element:t(pt,{}),protected:!0},{path:"kyc-submited",element:t(ft,{}),protected:!0},{path:"/login",element:t(re,{}),protected:!0}],_t=bt.map(e=>({...e,element:e.layout==="blank"?t(qe,{children:e.element}):t(Oe,{children:e.element})})),vt=pe(_t),xt=fe({themeConfig:Be}),Nt=ge({reducer:xt});be.createRoot(document.getElementById("root")).render(t(f.Suspense,{children:t(_e,{store:Nt,children:t(rt,{children:t(ve,{router:vt})})})}));
